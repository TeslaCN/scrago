package pipeline

import (
	"log"
	"scrago/custom/pipeline/util"
	"testing"
)

func TestDecode(t *testing.T) {
	expected := "0caee55840ae0e4dd7bdf97ac6804b6bdcd12cd3"
	encoded := "00111010011011010110101101101111011011110011111100111111010000100011111000111010011010110110111100111010011011110011111001101110011011100100000101101100011011100111000001000011010000010110101101101101010000000100001000111010001111100110110001000000011011000110111001101101011011100011101100111100011011010110111000111101"
	decoded := util.Decode(encoded)
	log.Printf("LEN -> %d\n", len(encoded))
	log.Printf("DECODED -> %s\n", decoded)
	log.Println(expected == decoded)
}

func TestParseJs(t *testing.T) {
	js := "$('#rid_70869938699').attr('href','magnet:?xt=urn:btih:'+reurl('00111010011011010110101101101111011011110011111100111111010000100011111000111010011010110110111100111010011011110011111001101110011011100100000101101100011011100111000001000011010000010110101101101101010000000100001000111010001111100110110001000000011011000110111001101101011011100011101100111100011011010110111000111101'));"
	t.Log(util.ParseJs(js))
}
